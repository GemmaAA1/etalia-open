{% load endless %}

{% paginate first_page,per_page ulp_list %}
{% for ulp in ulp_list %}
    <a href="{% url 'library:paper' ulp.paper.pk %}">
        <div class="paper-list">
        <div class="compact">
            <div class="title">{{ ulp.paper.title|truncatechars:85 }}</div>
            <div class="authors-journal-date">
                {% with ulp.paper.print_full_authors|add:ulp.paper.print_journal_title as str %}
                {% if str|length > 105 %}
                    <span class="authors">{{ ulp.paper.print_full_authors|truncatechars:85 }}</span>
                    {{ ulp.paper.print_journal_title|truncatechars:20 }}
                    {{ ulp.paper.print_year }}
                {% else %}
                    <span class="authors">{{ ulp.paper.print_full_authors }}</span>
                    {{ ulp.paper.print_journal_title }}
                    {{ ulp.paper.print_year }}
                {% endif %}
                {% endwith %}
            </div>
        </div>
        </div>
    </a>
{% endfor %}
{% show_more %}