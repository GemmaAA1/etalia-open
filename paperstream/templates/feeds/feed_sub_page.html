{% load endless %}
{% load user_taste %}

{% paginate first_page,per_page ufmp_list %}
{% for ufmp in ufmp_list %}
    <div id="{{ ufmp.paper.pk }}" class="paper-list {% if user_taste|get_is_liked:ufmp.paper.pk %} bg-active {% endif %}">
{#        <div class="altmetric">#}
{#            {% if ufmp.paper.id_doi %}<div class='altmetric-embed' data-hide-less-than="20" data-badge-type='donut' data-doi="{{ ufmp.paper.id_doi }}"></div>#}
{#            {% elif ufmp.paper.id_arx %}<div class='altmetric-embed' data-hide-less-than="20" data-badge-type='donut' data-arxiv="{{ ufmp.paper.id_arx }}"></div>#}
{#            {% elif ufmp.paper.id_pmi %}<div class='altmetric-embed' data-hide-less-than="20" data-badge-type='donut' data-pmid="{{ ufmp.paper.id_pmi }}"></div>#}
{#            {% endif %}#}
{#        </div>#}
        <div class="compact">
            <div class="row">
                <div class="long">
                    <div class="title">{{ ufmp.paper.title|truncatechars:90 }}</div>
                    <div class="authors-journal-date">
                        {% with ufmp.paper.print_full_authors|add:ufmp.paper.print_journal_title|add:ufmp.paper.print_date as str %}
                        {% if str|length > 110 %}
                            <span class="authors">{{ ufmp.paper.print_full_authors|truncatechars:75 }}</span>
                            {{ ufmp.paper.print_journal_title|truncatechars:20 }}
                            {{ ufmp.paper.print_date }}
                        {% else %}
                            <span class="authors">{{ ufmp.paper.print_full_authors }}</span>
                            {{ ufmp.paper.print_journal_title }}
                            {{ ufmp.paper.print_date }}
                        {% endif %}
                        {% endwith %}
                    </div>
                </div>
                <div class="short">
                    <div class="title">{{ ufmp.paper.title|truncatechars:75 }}</div>
                    <div class="authors-journal-date">
                        {% with ufmp.paper.print_full_authors|add:ufmp.paper.print_journal_title as str %}
                        {% if str|length > 100 %}
                            <span class="authors">{{ ufmp.paper.print_full_authors|truncatechars:60 }}</span>
                            {{ ufmp.paper.print_journal_title|truncatechars:20 }}
                            {{ ufmp.paper.print_date }}
                        {% else %}
                            <span class="authors">{{ ufmp.paper.print_full_authors }}</span>
                            {{ ufmp.paper.print_journal_title }}
                            {{ ufmp.paper.print_date }}
                        {% endif %}
                        {% endwith %}
                    </div>
                </div>

            </div>
        </div>
        <div class="extended">
            <div class="row">
                <div class="col-lg-10 nopadding">
                    <div class="title">{{ ufmp.paper.title }}</div>
                    <div class="authors">{{ ufmp.paper.print_full_authors}}</div>
                    <div class="journal-date">
                        {{ ufmp.paper.print_journal_title}}
                        {{ ufmp.paper.print_date }}
                    </div>
                    <div class="abstract">{{ ufmp.paper.abstract }}</div>
                </div>
                <div class="col-lg-2 nopadding">
                    <ul class="stamps-ext">
                        <li>
                            <a class="go-to-pdf" href="{{ ufmp.paper.url }}" target="_blank">Pdf</a>
                        </li>
                        <li>
                            {% if ufmp.paper.pk in user_lib %}
                                <span class="add-to-library active">Library</span>
                            {% else %}
                                <a class="add-to-library" href="javascript:void(0)">Library</a>
                            {% endif %}
                        </li>
                        <li>
                            <a class="comment" href="{% url 'library:paper' ufmp.paper.pk %}#comment">Comment</a>
                        </li>
                        <li>
                            <a  class="email" href="javascript:void(0)">Email</a>
                        </li>
                        <li>
                            <a class="tweet" href="javascript:void(0)">Tweet</a>
                        </li>
                        <li>
                            <a class="google-plus" href="javascript:void(0)">Google+</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <span>
            <ul class="stamps">
                <li>
                    <a class="open" href="{% url 'library:paper' ufmp.paper.pk %}" target="_blank"></a>
                </li>
                <li>
                    <a class="like {% if user_taste|get_is_liked:ufmp.paper.pk %} active {% endif %}" href="#"></a>
                </li>
                <li>
                    <a class="tick {% if user_taste|get_is_ticked:ufmp.paper.pk %} active {% endif %}" href="#"></a>
                </li>
                <li>
                    <a class="more" href="#"></a>
                </li>
            </ul>
        </span>
    </div>

{% endfor %}
{% show_more %}






