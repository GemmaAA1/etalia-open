{% load staticfiles %}

{% load navbar_extra %}

{% block navbar %}
<!-- Navigation -->
{#<nav class="navbar navbar-default navbar-fixed-top" role="navigation">#}
{% if user.is_authenticated %}
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="{% url 'core:home' %}"></a>
            <!-- Collect the nav links, forms, and other content for toggling -->

            <div class="collapse navbar-collapse" id="navbar-collapse-1">
                {% if "feed" in request.path or "user" in request.path %}
                    <form class="navbar-form navbar-left" role="search">
                        <div class="form-group has-feedback searchbox">
                            <input type="text" class="form-control" placeholder="Search" name="query" value={% if current_query %}"{{ current_query }}"{% else %}""{% endif %}>
                        <span class="glyphicon glyphicon-search form-control-feedback"></span>
    {#                        </button>#}
                        </div>
                    </form>
                {% endif %}
                <ul class="nav navbar-nav navbar-right">
                    <li class="{% active request 'feed.+' %}">
                        <a class="stream-icon" href="{% url 'feeds:main' %}">Stream</a>
                    </li>
                    <li class="{% active request 'discover.+' %}">
                        <a class="discover-icon" href="#">Discover</a>
                    </li>
                    <li class="{% active request 'user/library.+' %}">
                        <a class="library-icon" href="{% url 'user:library' %}">Library</a>
                    </li>
                    <li class="{% active request 'comment.+' %}">
                        <a class="notifications-icon" href="#">Notifications</a>
                    </li>
                    <li class="dropdown {% active request 'accounts.+' %}">
                        <a class="profile-icon dropdown-toggle" data-toggle="dropdown" href="#"></a>
                        <ul class="dropdown-menu" role="menu">
                          <li class=""><a href="#" data-toggle="modal" data-target="#update-profile-modal">Profile</a></li>
                          <li><a href="#">Help</a></li>
                          <li class="divider"></li>
                          <li><a href="{% url 'user:logout' %}">Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
{% else %}
    <nav class="navbar navbar-default nav-bar-anonymous" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-sign-in">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand navbar-brand-anonymous" href="{% url 'core:home' %}"></a>
            <!-- Collect the nav links, forms, and other content for toggling -->

            <div class="collapse navbar-collapse" id="navbar-collapse-sign-in">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a class="signin-icon dropdown-toggle" data-toggle="dropdown" href="#">Sign-in</a>
                        <ul class="dropdown-menu" role="menu">
                          <li class=""><a href="{% url "social:begin" backend="custom-zotero" %}">Zotero</a></li>
                          <li class=""><a href="{% url "social:begin" backend="custom-mendeley-oauth2" %}">Mendeley</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

    </nav>
{% endif %}
{% endblock %}


