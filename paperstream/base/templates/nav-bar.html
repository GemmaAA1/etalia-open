{% load staticfiles %}

{% load navbar_extra %}

<link href="{% static '/static/css/nav-bar.css' %}" rel="stylesheet">

{% block navbar %}
<!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top topnav" role="navigation">
    <div class="container topnav">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand topnav" href="{% url 'home' %}"><strong>PaperStream.io</strong></a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        {% if user.is_authenticated %}

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">

                {% if not user.is_lib_synced %}
                {% include "home/spinner.html" %}
                <li id="lib-sync">
                    <a href="#">Syncing <span id="lib-sync-count">{{ user.lib_size }}</span> papers</a>
                </li>
                {% endif %}
                {% if not user.is_feed_synced and user.is_lib_synced %}
                {% include "home/spinner.html" %}
                <li id="feed-sync">
                    <a href="#"><em>Curating <span id="feed-sync-count">{{ user.feedhome.lib_size }}</span> papers</em></a>
                </li>
                {% endif %}

                <li id="nav-bar-feed" class="{% active request 'feed.+' %} {% if not user.is_lib_synced %} disabled {% endif %}">
                    <a href="{% url 'feed' %}">Feed</a>
                </li>
                <li id="nav-bar-discover" class="{% active request 'discover.+' %} {% if not user.is_lib_synced %} disabled {% endif %}">
                    <a href="#">Discover</a>
                </li>
                <li id="nav-bar-connect" class="{% active request 'connect.+' %} {% if not user.is_lib_synced %} disabled {% endif %}">
                    <a href="#">Connect</a>
                </li>
                <li id="nav-bar-comment" class="{% active request 'comment.+' %} {% if not user.is_lib_synced %} disabled {% endif %}">
                    <a href="#">Comment</a>
                </li>
                <li class="{% active request 'search.+' %}">
                    <a href=""><span class="glyphicon glyphicon-search"></span></a>
                </li>
                <li class="dropdown {% active request 'library.+|accounts.+' %}">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-user"></span>
                    <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      <li class="{% active request 'library.+' %}"><a href="{% url 'library' %}">Library</a></li>
                      <li class="{% active request 'accounts/profile' %}"><a href="{% url 'profile' %}">Profile</a></li>
                      <li class="{% active request 'accounts/settings' %}"><a href="{% url 'settings' %}">Settings</a></li>
                      <li><a href="#">Help</a></li>
                      <li class="divider"></li>
                      <li><a href="{% url 'account_logout' %}">Logout</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        {% else %}
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="{% url 'home' %}#about">About</a>
                </li>
                <li>
                    <a href="{% url 'home' %}#contact">Contact</a>
                </li>
                <li>
                    <a href="#">Login</a>
                </li>
            </ul>
        </div>
        {% endif %}
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
{% endblock %}


