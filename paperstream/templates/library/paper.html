{% extends 'base.html' %}

{% load disqus_tags %}
{% load disqus %}
{% load staticfiles %}

{% block css %}
    {{ block.super }}
    <link href="{% static 'css/library.css' %}" rel="stylesheet">
{% endblock css %}

{% block title %}
    Library
{% endblock title %}

{% block content %}
    <div class="container"  style="margin-bottom:100px">
        <div class="library">
            <div class="col-lg-1"></div>
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-lg-9">
                        <div class="paper">
                            <div class="title">{{ paper.title }}
                                <a href="{{ paper.url }}" target="_blank">(link)</a>
                            </div>
                            <div>
                                <i>By</i>
                                <span class="authors">
                                    {{ paper.print_full_authors }}
                                </span>
                            </div>
                            <div>
                                <i>In</i>
                                <span class="journal">
                                    {{ paper.print_journal_title }}
                                </span>
                                <i>-</i>
                                <span class="date">
                                    {{ paper.print_month_year }}
                                </span>
                                <i>-</i>
                                <span class="ids">
                                    {{ paper.print_ids }}
                                </span>
                            </div>
                            {% if paper.abstract %}
                                <div class="abstract-title">Abstract:</div>
                                <div class="abstract-body">
                                    {{ paper.abstract }}
                                </div>
                            {% endif %}
                        </div>
                        <div class="comment">
                            <div id="disqus_thread"></div>
                                <!-- use sso for disqus -->
{#                                {% disqus_sso %}#}
                                {% if user.is_authenticated %}
                                    {% get_disqus_sso request %}
                                    <!-- comments -->
                                    {% disqus_show_comments %}
                                {%  endif %}
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="neighbors">
                            {% if paper.id_doi %}<div class='altmetric-embed' data-badge-type='donut' data-doi="{{ paper.id_doi }}"></div>
                            {% elif paper.id_arx %}<div class='altmetric-embed' data-badge-type='donut' data-arxiv="{{ paper.id_arx }}"></div>
                            {% elif paper.id_pmi %}<div class='altmetric-embed' data-badge-type='donut' data-pmid="{{ paper.id_pmi }}"></div>
                            {% endif %}
                            {% if neighbors %}
                            <div class="title">Similar Papers:</div>
                                {% for neighbor in neighbors %}
                                    <div class="neighbor">
                                        <a href="{% url 'library:paper' neighbor.pk %}">{{ neighbor.title }}</a>
                                        <br>
                                        <i>in</i> {{ neighbor.print_journal_title }}, {{ neighbor.print_year }}
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-1"></div>
        </div>
    </div>

    <script type='text/javascript' src='https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js'></script>
{% endblock content %}